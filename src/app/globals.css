@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    -webkit-tap-highlight-color: transparent;
  }
  
  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-text-size-adjust: 100%;
    touch-action: manipulation;
  }
  
  body {
    @apply bg-primary-bg-secondary text-text-primary font-sans;
    overscroll-behavior-y: none;
    -webkit-overflow-scrolling: touch;
  }
  
  input:focus {
    outline: none;
  }
  
  /* Prevent pull-to-refresh on mobile */
  body {
    overscroll-behavior-y: contain;
  }
  
  /* Improve button touch targets on mobile */
  button {
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
    touch-action: manipulation;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center px-4 py-3 min-h-[48px] rounded-lg font-medium select-none touch-manipulation;
  }
  
  .btn-primary {
    @apply btn bg-action-primary text-white hover:bg-gray-800 active:bg-gray-900;
  }
  
  .btn-secondary {
    @apply btn bg-action-secondary text-text-primary hover:bg-gray-200 active:bg-gray-300;
  }
  
  .btn-outline {
    @apply btn bg-white border border-border text-text-primary hover:bg-gray-50 active:bg-gray-100;
  }
  
  .btn-danger {
    @apply btn bg-action-danger text-white hover:bg-red-700 active:bg-red-800;
  }
  
  .btn-success {
    @apply btn bg-action-success text-white hover:bg-green-700 active:bg-green-800;
  }
  
  .btn-ghost {
    @apply btn bg-transparent text-text-muted hover:bg-gray-100 active:bg-gray-200;
  }
  
  .btn-icon {
    @apply inline-flex items-center justify-center w-11 h-11 rounded-lg text-text-muted hover:bg-gray-100 active:bg-gray-200;
  }
  
  .card {
    @apply bg-white rounded-xl border border-border p-6;
  }
  
  .input {
    @apply w-full h-12 px-4 bg-white border border-border rounded-lg text-text-primary placeholder:text-text-placeholder focus:border-border-focus focus:ring-1 focus:ring-border-focus;
  }
  
  .label {
    @apply text-xs font-medium uppercase tracking-wide text-text-muted;
  }
  
  .score-display {
    @apply font-mono text-6xl font-bold text-text-primary tabular-nums;
  }
  
  .timer-display {
    @apply font-mono text-2xl font-semibold tabular-nums;
  }
}

/* ==========================================================================
   PHONE-ONLY OPTIMIZATIONS (max-width: 639px)
   These rules ONLY apply to phone-sized screens.
   Desktop / tablet layouts are completely untouched.
   ========================================================================== */

/* --- Phone Portrait --- */
@media (max-width: 639px) and (orientation: portrait) {
  /* Tighter card padding on small phones */
  .bg-white.rounded-xl.border {
    padding-left: 1rem;
    padding-right: 1rem;
    padding-top: 0.875rem;
    padding-bottom: 0.875rem;
  }

  /* Slightly smaller score text so it never overflows */
  .font-mono.tabular-nums {
    font-size: clamp(2.25rem, 10vw, 3rem);
  }

  /* Tighter gap in 3-col scoreboard grid */
  .grid.grid-cols-3 {
    gap: 0.5rem;
  }

  /* Tighter gap in 2-col control grids */
  .grid.grid-cols-2 {
    gap: 0.75rem;
  }

  /* Reduce spacing between stacked buttons */
  .space-y-3 > * + * {
    margin-top: 0.5rem;
  }
  .space-y-2 > * + * {
    margin-top: 0.375rem;
  }
}

/* --- Phone Landscape --- */
@media (max-width: 915px) and (max-height: 500px) and (orientation: landscape) {
  /* Compact sticky header */
  .sticky.top-0 .h-14,
  .sticky.top-0 [class*="h-14"] {
    height: 2.5rem;
  }

  /* Reduce content area padding so more fits on screen */
  .max-w-4xl.mx-auto {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }

  /* Compact card padding in landscape */
  .bg-white.rounded-xl.border {
    padding: 0.625rem 0.75rem;
  }

  /* Smaller score text to fit landscape height */
  .font-mono.tabular-nums {
    font-size: clamp(1.75rem, 7vw, 2.5rem);
  }

  /* Compact scoreboard margin */
  .grid.grid-cols-3 {
    gap: 0.375rem;
  }

  /* Tighter vertical spacing everywhere */
  .mb-4 {
    margin-bottom: 0.5rem;
  }
  .mb-3 {
    margin-bottom: 0.375rem;
  }
  .mt-3, .mt-4 {
    margin-top: 0.375rem;
  }
  .space-y-3 > * + * {
    margin-top: 0.375rem;
  }
  .space-y-2 > * + * {
    margin-top: 0.25rem;
  }
  .gap-4 {
    gap: 0.5rem;
  }

  /* Compact button heights in landscape */
  .min-h-\[48px\] {
    min-height: 40px;
    padding-top: 0.375rem;
    padding-bottom: 0.375rem;
  }
  .min-h-\[56px\] {
    min-height: 44px;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }

  /* Smaller team name / label text */
  .text-sm.font-medium.text-text-muted {
    font-size: 0.6875rem;
  }
  .text-xs.font-medium.uppercase {
    font-size: 0.625rem;
  }

  /* Timer display smaller */
  .font-mono.font-semibold.tabular-nums {
    font-size: 1.125rem;
  }

  /* Make the 1-col control panel side-by-side in landscape */
  .grid.grid-cols-1.md\:grid-cols-3 {
    grid-template-columns: repeat(3, 1fr);
  }
}
